{"version":3,"sources":["../../app/util/error-handler.js"],"names":["pattern","require","DevErrorHandle","err","req","res","status","render","message","ProdErrorHandle","error","ErrorHandler","params","send","console","log","hostname","iss","launch","redirect","protocol"],"mappings":";;;;;AAAA,IAAIA,UAAUC,QAAQ,SAAR,EAAmBD,OAAjC;;AAGA;AACA;AACO,IAAME,0CAAiB,SAAjBA,cAAiB,CAACC,GAAD,EAAMC,GAAN,EAAWC,GAAX,EAAmB;AAC7CA,QAAIC,MAAJ,CAAWH,IAAIG,MAAJ,IAAc,GAAzB;AACAD,QAAIE,MAAJ,CAAW,OAAX,EAAoB;AAChBC,iBAASL;AADO,KAApB;AAGH,CALM;;AAOP;AACA;AACO,IAAMM,4CAAkB,SAAlBA,eAAkB,CAACN,GAAD,EAAMC,GAAN,EAAWC,GAAX,EAAmB;AAC9CA,QAAIC,MAAJ,CAAWH,IAAIG,MAAJ,IAAc,GAAzB;AACAD,QAAIE,MAAJ,CAAW,OAAX,EAAoB;AAChBC,iBAASL,IAAIK,OADG;AAEhBE,eAAO;AAFS,KAApB;AAIH,CANM;;AASA,IAAMC,sCAAeX,QAAQ;AAChC,0CAAsC,uCAACI,GAAD,EAAMC,GAAN,EAAWO,MAAX;AAAA,eAClCP,IAAIC,MAAJ,CAAW,GAAX,EAAgBO,IAAhB,CAAqB;AACjBL,qBAAS;AADQ,SAArB,CADkC;AAAA,KADN;AAKhC,4CAAwC,yCAACJ,GAAD,EAAMC,GAAN,EAAWO,MAAX,EAAsB;AAC1DE,gBAAQC,GAAR,CAAeX,IAAIY,QAAnB,cAAoCJ,OAAOK,GAA3C,gBAAyDL,OAAOM,MAAhE;AACAb,YAAIc,QAAJ,CAAgBf,IAAIgB,QAApB,WAAkChB,IAAIY,QAAtC,cAAuDJ,OAAOK,GAA9D,gBAA4EL,OAAOM,MAAnF;AACH;AAR+B,CAAR,CAArB","file":"error-handler.js","sourcesContent":["var pattern = require(\"matches\").pattern;\n\n\n// development error handler\n// will print stacktrace\nexport const DevErrorHandle = (err, req, res) => {\n    res.status(err.status || 500);\n    res.render('error', {\n        message: err\n    });\n};\n\n// production error handler\n// no stacktraces leaked to user\nexport const ProdErrorHandle = (err, req, res) => {\n    res.status(err.status || 500);\n    res.render('error', {\n        message: err.message,\n        error: {}\n    });\n};\n\n\nexport const ErrorHandler = pattern({\n    '\"InvalidStateError\",req,res,params': (req, res, params) =>\n        res.status(500).send({\n            message: 'Invalid authentication parameters sent'\n        }),\n    '\"AuthenticationError\",req,res,params': (req, res, params) => {\n        console.log(`${req.hostname}/?iss=${params.iss}&launch=${params.launch}`);\n        res.redirect(`${req.protocol}://${req.hostname}/?iss=${params.iss}&launch=${params.launch}`);\n    }\n});"]}